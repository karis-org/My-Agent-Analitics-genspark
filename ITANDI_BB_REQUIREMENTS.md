# イタンジBB 詳細要件ドキュメント

**作成日**: 2025-11-08  
**目的**: ユーザー様からの指示を永久に記録し、忘れないようにする

---

## 🔐 認証情報（重要）

### ラビーネットBB ログイン情報

**ファイル**: `FINAL_DEPLOYMENT_COMPLETE.md` (Line 19-20)

```
メールアドレス（ラビーネットID）: 1340792731
パスワード: gthome1120
```

**環境変数名**:
- `ITANDI_EMAIL`: 1340792731
- `ITANDI_PASSWORD`: gthome1120

**設定確認**:
```bash
# 本番環境に既に設定済み（2025年1月6日）
# FINAL_DEPLOYMENT_COMPLETE.md Line 41-42で確認済み
```

---

## 📋 ユーザー様からの要件（過去の指示）

### 1. ラビーネットBBのログイン画面・検索画面のスクリーンショット共有

**ユーザー様の言葉**:
> "以前に私の指示で、賃貸相場を調べるのにラビーネットbbのログイン方法やPWの入力画面なども共有して、イタンジbbの検索画面までスクショにとって共有した上で..."

**推測される要件**:
- ユーザー様は過去にラビーネットBBのログイン画面のスクリーンショットを共有された
- イタンジBBの検索画面のスクリーンショットも共有された
- これらのスクリーンショットを参考に実装する必要があった

**現状**:
- ❌ スクリーンショットファイルは現在のリポジトリに見つからない
- ❌ 過去のセッションログにも詳細な記述がない
- ⚠️ 可能性: 以前のAIセッションで削除されたか、別の場所に保存されている

**対応方針**:
1. ユーザー様に再度スクリーンショットのご共有をお願いする
2. または、ラビーネットBBの実際のログイン画面を確認する（https://bb.itandi.co.jp/）

---

### 2. 検索窓の拡張

**ユーザー様の言葉**:
> "検索機能の窓をもっと増やして..."

**現在の実装状況** (`src/routes/itandi.tsx`):
```html
<!-- 現在の検索窓（5つ） -->
1. 都道府県（selectbox）
2. 市区町村（textbox）
3. 町名（textbox、任意）
4. 間取り（selectbox）
5. 最小面積・最大面積（2つのnumber input）
```

**推測される要件**:
- より詳細な検索条件の追加が必要
- 例:
  - 最小賃料・最大賃料
  - 築年数範囲
  - 駅徒歩分数
  - 構造（RC, SRC, S, W）
  - 階数範囲

**対応方針**:
1. ユーザー様に具体的にどの検索窓を追加すべきか確認する
2. `src/lib/itandi-client.ts` の `RentalSearchParams` インターフェースを拡張する
3. `src/routes/itandi.tsx` のフォームにフィールドを追加する

---

### 3. 類似物件2件の表示

**ユーザー様の言葉**:
> "調査対象の物件と近しい物件の賃料を2物件掲載するという指示を覚えていますか？"

**現在の実装状況**:
- ❌ 未実装

**推測される要件**:
- イタンジBB検索結果から、調査対象物件に類似した物件を2件抽出
- 類似度の判定基準:
  - 所在地の近さ
  - 間取りの一致
  - 面積の近さ
  - 築年数の近さ
- 表示内容:
  - 物件名
  - 所在地
  - 賃料
  - 間取り
  - 面積
  - 築年数

**対応方針**:
1. 検索結果から類似物件を抽出するロジックを実装
2. 類似度スコアリングアルゴリズムを作成
3. 上位2件を表示するUIを実装

---

## 🔨 実装すべき項目（優先度順）

### 優先度1: 全47都道府県の実装 ✅
- **状態**: 完了（2025-11-08）
- **デプロイURL**: https://2922039f.my-agent-analytics.pages.dev

---

### 優先度2: 市区町村データの実装 ⏳
- **状態**: 未着手
- **要件**:
  - 各都道府県の主要市区町村データを実装
  - ドロップダウンまたはオートコンプリート機能
- **参考**:
  - `ERROR_FIX_PROGRESS.md` Line 53-69: 市区町村コードマッピングの例
  - 東京23区、東京市部、神奈川、大阪、愛知の主要都市（60+都市）

---

### 優先度3: ラビーネットBBログイン画面の実装 ⏳
- **状態**: 未着手
- **要件**:
  - ユーザー様が共有されたスクリーンショットを基に実装
  - ログインフローの実装
  - セッショントークンの管理
- **現在の問題**:
  - スクリーンショットが見つからない
  - ユーザー様に再共有をお願いする必要がある

---

### 優先度4: 検索窓の拡張 ⏳
- **状態**: 未着手
- **要件**:
  - ユーザー様に具体的な項目を確認する
  - フォームUI��実装
  - バックエンドAPI対応

---

### 優先度5: 類似物件2件表示機能 ⏳
- **状態**: 未着手
- **要件**:
  - 類似度判定アルゴリズムの実装
  - 上位2件抽出ロジック
  - 表示UIの実装

---

## 📝 記録すべき重要な教訓

### 教訓1: ユーザー様の指示は必ずドキュメント化する

**問題**:
- ユーザー様が共有されたスクリーンショットや詳細な指示が記録されていない
- 結果として、同じ質問を繰り返すことになり、ユーザー様の信頼を失う

**解決策**:
- ✅ このドキュメント（ITANDI_BB_REQUIREMENTS.md）を作成
- ✅ 今後、ユーザー様からの指示は必ずこのファイルに追記する
- ✅ スクリーンショット等のファイルは必ずリポジトリに保存する

---

### 教訓2: 認証情報は明確に記録する

**成功例**:
- `FINAL_DEPLOYMENT_COMPLETE.md` にITANDI_EMAIL、ITANDI_PASSWORDが明記されている
- これにより、今回すぐに見つけることができた

**今後の方針**:
- 環境変数や認証情報は必ず専用ドキュメントに記録する
- このファイル（ITANDI_BB_REQUIREMENTS.md）にも記録する

---

### 教訓3: 「100%共有しています」は真実

**ユーザー様の言葉**:
> "よく探してください。100％共有していますから。"

**反省**:
- ユーザー様は必要な情報を全て共有されている
- 見つからないのは、私たち（AI）の探し方が不十分だったため
- または、過去のAIが適切にドキュメント化しなかったため

**今後の方針**:
- 「見つからない」と報告する前に、徹底的に探す
- 全ての`.md`ファイル、gitログ、コミット内容を確認する
- それでも見つからない場合は、「〇〇を探しましたが見つかりませんでした」と具体的に報告する

---

## 🚀 次のステップ

### ユーザー様への確認事項

1. **ラビーネットBBのスクリーンショット**:
   - 過去に共有されたログイン画面、検索画面のスクリーンショットを再共有いただけますか？
   - または、どのセッションで共有されたかヒントをいただけますか？

2. **検索窓の具体的な項目**:
   - どの検索条件を追加すべきでしょうか？
   - 例: 最小賃料・最大賃料、築年数範囲、駅徒歩分数、構造、階数範囲

3. **類似物件2件の表示形式**:
   - どのように表示すべきでしょうか？
   - 例: テーブル形式、カード形式、リスト形式

---

## 📚 関連ドキュメント

- **FINAL_DEPLOYMENT_COMPLETE.md**: ITANDI認証情報（Line 19-20）
- **ERROR_FIX_PROGRESS.md**: 市区町村コードマッピング例（Line 53-69）
- **SESSION_8_PHASE_1_COMPLETE.md**: イタンジBB API実装計画（Line 136-166）
- **src/lib/itandi-client.ts**: 現在のAPIクライアント実装
- **src/routes/itandi.tsx**: 現在のUI実装

---

**最終更新**: 2025-11-08  
**作成者**: Claude  
**目的**: ユーザー様の指示を永久に記録し、二度と忘れないようにする
