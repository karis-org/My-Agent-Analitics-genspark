# My Agent Analytics

**AIã‚’æ´»ç”¨ã—ãŸä¸å‹•ç”£æŠ•è³‡åˆ†æãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **

[![Cloudflare Pages](https://img.shields.io/badge/Cloudflare-Pages-orange)](https://pages.cloudflare.com/)
[![Hono](https://img.shields.io/badge/Framework-Hono-blue)](https://hono.dev/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue)](https://www.typescriptlang.org/)
[![License](https://img.shields.io/badge/License-MIT-green)](LICENSE)

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

My Agent Analyticsã¯ã€ä¸å‹•ç”£ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨æŠ•è³‡å®¶å‘ã‘ã®åŒ…æ‹¬çš„ãªãƒ‡ãƒ¼ã‚¿åˆ†æãƒ»ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ç‰©ä»¶ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã ã‘ã§ã€AIã¨æ”¿åºœçµ±è¨ˆãƒ‡ãƒ¼ã‚¿ï¼ˆe-Statï¼‰ã‚’æ´»ç”¨ã—ãŸè©³ç´°ãªå¸‚å ´åˆ†æãƒ¬ãƒãƒ¼ãƒˆã‚’è‡ªå‹•ç”Ÿæˆã—ã¾ã™ã€‚

### ğŸŒŸ ä¸»ãªç‰¹å¾´

- **ğŸ“Š è‡ªå‹•è¨ˆç®—**: NOIã€åˆ©å›ã‚Šã€DSCRã€LTVãªã©ã®æŠ•è³‡æŒ‡æ¨™ã‚’è‡ªå‹•ç®—å‡º
- **ğŸ“ˆ ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–**: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªã‚°ãƒ©ãƒ•ã¨ãƒãƒ£ãƒ¼ãƒˆã§æŠ•è³‡ãƒªã‚¿ãƒ¼ãƒ³ã‚’è¦–è¦šåŒ–
- **ğŸ“„ PDFãƒ¬ãƒãƒ¼ãƒˆ**: ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãªPDFãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ
- **ğŸ—ºï¸ å½¹æ‰€èª¿æŸ»æ”¯æ´**: éƒ½å¸‚è¨ˆç”»æƒ…å ±ã€ãƒã‚¶ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã€å»ºç¯‰åˆ¶é™ã®çµ±åˆ
- **ğŸ¤– AIåˆ†æ**: OpenAI GPT-4ã«ã‚ˆã‚‹é«˜åº¦ãªå¸‚å ´åˆ†æ
- **ğŸ“± PWAå¯¾å¿œ**: ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯èƒ½ã€ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ©Ÿèƒ½æ­è¼‰

## ğŸš€ ãƒ‡ãƒ¢

**Sandboxç’°å¢ƒ**: [https://3000-i1kyslh8gn8plpo5b4s6r-b9b802c4.sandbox.novita.ai](https://3000-i1kyslh8gn8plpo5b4s6r-b9b802c4.sandbox.novita.ai)

**GitHub ãƒªãƒã‚¸ãƒˆãƒª**: [https://github.com/koki-187/My-Agent-Analitics-genspark](https://github.com/koki-187/My-Agent-Analitics-genspark)

**å…ƒã®Next.jsãƒªãƒã‚¸ãƒˆãƒª**: [https://github.com/koki-187/My-Agent-analytics](https://github.com/koki-187/My-Agent-analytics)

## ğŸ“‹ ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³

### âœ… å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½

- [x] Hono ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«ã‚ˆã‚‹ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- [x] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãªãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸
- [x] API ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
- [x] PWA ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ
- [x] Service Workerï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œï¼‰
- [x] é™çš„ãƒ•ã‚¡ã‚¤ãƒ«é…ä¿¡
- [x] TypeScript å®Œå…¨å¯¾å¿œ
- [x] Vite ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ 

### ğŸ”„ å®Ÿè£…ä¸­

- [ ] Google OAuth èªè¨¼
- [ ] D1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆ
- [ ] ç‰©ä»¶å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ 
- [ ] æŠ•è³‡æŒ‡æ¨™è¨ˆç®—ã‚¨ãƒ³ã‚¸ãƒ³
- [ ] ã‚°ãƒ©ãƒ•ãƒ»ãƒãƒ£ãƒ¼ãƒˆè¡¨ç¤º

### ğŸ“ ä»Šå¾Œã®å®Ÿè£…äºˆå®š

- [ ] e-Stat API çµ±åˆï¼ˆæ”¿åºœçµ±è¨ˆãƒ‡ãƒ¼ã‚¿ï¼‰
- [ ] OpenAI API çµ±åˆï¼ˆAIåˆ†æï¼‰
- [ ] PDF ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- [ ] ç‰©ä»¶ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†
- [ ] ãƒ¬ãƒãƒ¼ãƒˆå…±æœ‰æ©Ÿèƒ½

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Hono (Cloudflare Workers)
- **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°**: Tailwind CSS (CDN)
- **ã‚¢ã‚¤ã‚³ãƒ³**: Font Awesome
- **ãƒ•ã‚©ãƒ³ãƒˆ**: Noto Sans JP

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **ãƒ©ãƒ³ã‚¿ã‚¤ãƒ **: Cloudflare Workers
- **API**: Hono REST API
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Cloudflare D1 (SQLite)
- **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: Cloudflare R2
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: Cloudflare KV

### é–‹ç™ºãƒ„ãƒ¼ãƒ«
- **è¨€èª**: TypeScript 5.0
- **ãƒ“ãƒ«ãƒ‰**: Vite
- **ãƒ‡ãƒ—ãƒ­ã‚¤**: Wrangler CLI
- **ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†**: PM2 (é–‹ç™ºç’°å¢ƒ)

## ğŸ“¦ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### å¿…è¦è¦ä»¶

- Node.js 18.x ä»¥ä¸Š
- npm ã¾ãŸã¯ yarn
- Cloudflare ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆãƒ‡ãƒ—ãƒ­ã‚¤ç”¨ï¼‰

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

1. **ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³**

```bash
git clone https://github.com/koki-187/My-Agent-Analitics-genspark.git
cd My-Agent-Analitics-genspark
```

2. **ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**

```bash
npm install
```

3. **ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š**

`.dev.vars` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã€å¿…è¦ãªAPI ã‚­ãƒ¼ã‚’è¨­å®šï¼š

```bash
# .dev.vars
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
OPENAI_API_KEY=your-openai-api-key
ESTAT_API_KEY=your-estat-api-key
SESSION_SECRET=your-session-secret
```

4. **ãƒ“ãƒ«ãƒ‰**

```bash
npm run build
```

5. **é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•**

```bash
# PM2ã§èµ·å‹•ï¼ˆæ¨å¥¨ï¼‰
pm2 start ecosystem.config.cjs

# ã¾ãŸã¯ç›´æ¥èµ·å‹•
npm run dev:sandbox
```

6. **ãƒ–ãƒ©ã‚¦ã‚¶ã§ç¢ºèª**

http://localhost:3000 ã‚’é–‹ã

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤

### Cloudflare Pages ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

1. **Cloudflare API ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¨­å®š**

```bash
# GenSpark ã§ setup_cloudflare_api_key ã‚’å®Ÿè¡Œ
```

2. **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ“ãƒ«ãƒ‰**

```bash
npm run build
```

3. **Cloudflare Pages ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ**

```bash
npx wrangler pages project create my-agent-analytics \
  --production-branch main
```

4. **ãƒ‡ãƒ—ãƒ­ã‚¤**

```bash
npm run deploy:prod
```

5. **ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š**

```bash
npx wrangler pages secret put GOOGLE_CLIENT_ID --project-name my-agent-analytics
npx wrangler pages secret put GOOGLE_CLIENT_SECRET --project-name my-agent-analytics
npx wrangler pages secret put OPENAI_API_KEY --project-name my-agent-analytics
npx wrangler pages secret put ESTAT_API_KEY --project-name my-agent-analytics
```

## ğŸ“– APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

```http
GET /api/health
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "status": "ok",
  "timestamp": "2024-01-01T00:00:00.000Z",
  "version": "1.0.0"
}
```

### Hello World

```http
GET /api/hello
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "message": "Hello from My Agent Analytics!"
}
```

## ğŸ—‚ï¸ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
my-agent-analytics/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ index.tsx              # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ static/
â”‚   â”‚   â”œâ”€â”€ icons/             # PWAã‚¢ã‚¤ã‚³ãƒ³
â”‚   â”‚   â””â”€â”€ manifest.json      # PWAãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ
â”‚   â””â”€â”€ sw.js                  # Service Worker
â”œâ”€â”€ migrations/                # D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”œâ”€â”€ docs/                      # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ PROJECT_OVERVIEW.md
â”‚   â””â”€â”€ MIGRATION_PLAN.md
â”œâ”€â”€ nextjs-backup/             # Next.jsç‰ˆã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
â”œâ”€â”€ dist/                      # ãƒ“ãƒ«ãƒ‰å‡ºåŠ›
â”œâ”€â”€ wrangler.jsonc             # Cloudflareè¨­å®š
â”œâ”€â”€ vite.config.ts             # Viteãƒ“ãƒ«ãƒ‰è¨­å®š
â”œâ”€â”€ tsconfig.json              # TypeScriptè¨­å®š
â”œâ”€â”€ ecosystem.config.cjs       # PM2è¨­å®š
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- **API Keyç®¡ç†**: ã™ã¹ã¦ã®APIã‚­ãƒ¼ã¯Cloudflare Secretsã§ç®¡ç†
- **èªè¨¼**: Google OAuthã«ã‚ˆã‚‹å®‰å…¨ãªèªè¨¼
- **HTTPS**: ã™ã¹ã¦ã®é€šä¿¡ã¯HTTPSã§æš—å·åŒ–
- **CORS**: é©åˆ‡ãªCORSè¨­å®š

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

- âš¡ **APIå¿œç­”æ™‚é–“**: < 500ms
- ğŸ¯ **åˆå›è¡¨ç¤º**: < 2ç§’
- ğŸ“ˆ **Lighthouse ã‚¹ã‚³ã‚¢**: ç›®æ¨™ 90ç‚¹ä»¥ä¸Š
- ğŸŒ **ã‚°ãƒ­ãƒ¼ãƒãƒ«CDN**: Cloudflare ã®200+ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ³ã‚¿ãƒ¼

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ­“è¿ã—ã¾ã™ï¼å¤§ããªå¤‰æ›´ã®å ´åˆã¯ã€ã¾ãšissueã‚’é–‹ã„ã¦å¤‰æ›´å†…å®¹ã‚’è­°è«–ã—ã¦ãã ã•ã„ã€‚

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ [MIT ãƒ©ã‚¤ã‚»ãƒ³ã‚¹](LICENSE) ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ”— é–¢é€£ãƒªãƒ³ã‚¯

- [Hono ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://hono.dev/)
- [Cloudflare Workers ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://developers.cloudflare.com/workers/)
- [Cloudflare Pages ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://developers.cloudflare.com/pages/)
- [e-Stat API](https://www.e-stat.go.jp/api/)
- [OpenAI API](https://platform.openai.com/docs/)

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€[GitHubã®Issue](https://github.com/koki-187/My-Agent-Analitics-genspark/issues)ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

---

**é–‹ç™ºãƒãƒ¼ãƒ **: My Agent Team  
**æœ€çµ‚æ›´æ–°**: 2024å¹´10æœˆ30æ—¥  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
